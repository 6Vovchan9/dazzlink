import{a as d,b as r}from"./chunk-DMFGKB5Z.js";import{C as p,Ob as c,Pb as h,V as o,Y as g,a as l,b as u,r as i}from"./chunk-NVZOHAZI.js";var L=(()=>{let n=class n{constructor(e,t){this.http=e,this.pagesService=t}create(e){return this.http.post(`${r.fbDbUrl}/posts.json`,e)}getById(e){return this.http.get(`${r.fbDbUrl}/posts/${e}.json`,{headers:{"accept-language":this.pagesService.currentLanguage.getValue()}}).pipe(p(2e3),i(t=>{if(t)return u(l({},t),{id:e,published:new Date(t?.published)});throw new Error("Post not found")}))}getByIdRovragge(e){return this.http.get(`${r.rovraggeUrl}/publication/${e}`,{headers:{"accept-language":this.pagesService.currentLanguage.getValue().toLowerCase()}}).pipe(i(t=>t.data))}getPost(e){return this.http.get(`${r.articleUrl}/publication/${e}`,{headers:{"accept-language":this.pagesService.currentLanguage.getValue().toLowerCase()}}).pipe(i(t=>t.data))}setArticleEvaluation(e){return this.http.patch(`${r.rovraggeUrl}/publication/${e}/read`,null)}setArticleEvaluationProd(e){return this.http.patch(`${r.articleUrl}/publication/${e}/read`,null)}setArticleVoting(e,t){return this.http.patch(`${r.rovraggeUrl}/publication/${e}/${t}`,null).pipe(i(a=>a.data))}setArticleVotingProd(e,t){return this.http.patch(`${r.articleUrl}/publication/${e}/${t}`,null).pipe(i(a=>a.data))}remove(e){return this.http.delete(`${r.fbDbUrl}/posts/${e}.json`).pipe(p(2e3))}getAll(){let e={headers:new c({"x-accept-language":this.pagesService.currentLanguage.getValue()||"RU"})};return this.http.get(`${r.fbDbUrl}/posts.json`,{headers:{"x-accept-language":this.pagesService.currentLanguage.getValue()}}).pipe(p(2e3),i(t=>t?Object.keys(t).map(a=>u(l({},t[a]),{id:a,published:new Date(t[a].published)})):[]))}getAllRovragge(){return this.http.get(`${r.rovraggeUrl}/publication`,{headers:{"accept-language":this.pagesService.currentLanguage.getValue().toLowerCase()}}).pipe(i(e=>e.data))}getAllProd(e){let t={};return e?.id&&(t=e),this.http.get(`${r.articleUrl}/publication`,{headers:{"accept-language":this.pagesService.currentLanguage.getValue().toLowerCase()},params:t}).pipe(i(a=>a.data))}};n.\u0275fac=function(t){return new(t||n)(g(h),g(d))},n.\u0275prov=o({token:n,factory:n.\u0275fac,providedIn:"root"});let s=n;return s})();export{L as a};

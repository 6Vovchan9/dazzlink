<main class="page">
    <div class="container page__container">

        <!-- <div class="example"></div> -->

        <div
            class="mainVideo"
            [ngClass]="{
                'mainVideo--afterLoadPosterImg': posterImgLoad(),
                'mainVideo--afterLoadVideo': videoLoad()
            }"
        >
            <!-- Todo: нужно будет добавить событие (error) на видео когда не удастся его загрузить чтоб на баннере не показывался значок "play" и курсор был не pointer. Только у него слабая поддержка браузеров поэтому скорее всего придется прибегнуть к событию canplay -->
            <video #advertisingVideo class="mainVideo__video" playsinline controls>
                <source src="https://static.dazzlink.asia/landing/advertisingRus.mp4" type="video/mp4" />
                Ваш браузер не поддерживает встроенные видео.
            </video>
            <div
                class="mainVideo__customPoster"
                (click)="onVideoPlay()"
                [class.mainVideo__customPoster--hidden]="!showVideoPoster()"
            >
                <img
                    class="mainVideo__posterImg"
                    (load)="onloadCustomPoster()"
                    src="assets/images/home-page/bannerForVideo.png"
                    alt="poster"
                />
                <div class="playIcon"></div>
            </div>
        </div>

        <!-- <picture class="mainPicture">
            <source media="(max-width: 767px)" srcset="assets/images/home-page/mainPicForMobile.png" />
            <img src="assets/images/home-page/mainPic.png" class="mainPicture__img" alt="mainPicture" />
        </picture> -->

        <!-- <picture class="mainPicture">
            <div class="mainPicture__block">
                <a href="assets/images/home-page/mainPicForMobile.png"
                    class="progressive replace"
                    data-srcset="assets/images/home-page/mainPicForMobile.png 767w, assets/images/home-page/mainPic.png"
                    data-sizes="100vw"
                >
                    <img src="assets/images/home-page/smallMainPicForMobile.png"
                        srcset="assets/images/home-page/smallMainPicForMobile.png 767w, assets/images/home-page/smallMainPic.png"
                        sizes="100vw"
                        class="preview"
                        alt="previewImage"
                    />
                </a>
            </div>
        </picture> -->

        <!-- <picture *ngIf="false" class="mainPicture mainPicture--preview">
            <div class="mainPicture__block">
                <img class="mainPicture__image" src="assets/images/home-page/smallMainPic.png" alt="smallMainPicture">
            </div>
        </picture> -->

        <!-- <app-progressive-image scrolledElName="pageWrap" fullImageSrc="assets/images/home-page/mainPic.png" tinyImageSrc="assets/images/home-page/smallMainPic.png"></app-progressive-image> -->

        <!-- <img [src]="base64ForImg" alt="img"> -->

        <!-- <img #thumbHashDemo width="300" height="200"> -->

        <div class="aboutAppInfo">
            <div class="container aboutAppInfo__container">
                <div class="aboutAppInfo__text">
                    <h1 class="moduleTitle">Dazzlink: постройте великолепные отношения </h1>
                    <div class="aboutAppInfo__cont">
                        Знакомства для тех, кто ищет спутника
                        на всю жизнь, а не мимолетных встречи.
                        Доступно в крупных городах Узбекистана
                    </div>
                </div>
                <div class="aboutAppInfo__infoLinks aboutAppInfo__infoLinks--forDesktop">
                    <ng-container *ngTemplateOutlet="linkToApp"></ng-container>
                </div>
                @if (mobileDetectService.osDevice) {
                    <div class="aboutAppInfo__infoLinks aboutAppInfo__infoLinks--forMobile">
                        <button class="downloadApp"
                            type="button"
                            (click)="mobileDetectService?.goToDeviceStore()"
                        >
                            <div class="downloadApp__title">Скачайте<br />приложение</div>
                            <div class="downloadApp__icon">
                                <img [src]="mobileDetectService?.mobileStoreIconSrc()" alt="store" />
                            </div>
                        </button>
                    </div>
                } @else {
                    <div class="aboutAppInfo__infoLinks aboutAppInfo__infoLinks--forMobile">
                        <ng-container *ngTemplateOutlet="linkToApp"></ng-container>
                    </div>
                }
            </div>
        </div>

        @if (citiesForCarousel()?.length) {
            <div class="cityCarousel">
                <ul
                    class="cityCarousel__list"
                    [ngStyle]="{
                        '--card-count': citiesForCarousel().length
                    }"
                >
                    @for (city of citiesForCarousel(); track city.code) {
                        <li class="cityCarousel__item">
                            <div class="cityCard">
                                @if (city.imageList.length) {
                                    <app-city-carousel-image [imageData]="city.imageList[0]"></app-city-carousel-image>
                                }
                                <!-- <img [src]="city.imageList.href" alt="pic">
                                <img [src]="'assets/images/home-page/bannerForVideo.png'" alt="pic">
                                {{city.title}} -->
                                <div class="cityCard__name">
                                    {{city.title}}
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
        }

        <nav class="navigationMenu">
            <div class="navigationMenu__item">
                <div (click)="onAccoTriggerClick(['/media'])" class="squareNavBtn">
                    <div class="squareNavBtn__image">
                        <img src="assets/images/home-page/linkToArticlesX2.jpg" alt="linkToArticles">
                        <!-- <a href="assets/images/home-page/linkToArticlesX2.jpg" class="progressive replace">
                            <img src="assets/images/home-page/smallLinkToArticles.jpg" class="preview" alt="linkToArticles" />
                        </a> -->
                    </div>
                    <div class="squareNavBtn__title">
                        Медиа про отношения
                    </div>
                </div>
            </div>
            <div class="navigationMenu__item">
                <div (click)="onAccoTriggerClick(['/locations'])" class="squareNavBtn">
                    <div class="squareNavBtn__image">
                        <img src="assets/images/home-page/linkToLocationX2.jpg" alt="linkToLocation">
                        <!-- <a href="assets/images/home-page/linkToLocationX2.jpg" class="progressive replace">
                            <img src="assets/images/home-page/smallLinkToLocation.jpg" class="preview" alt="linkToLocation" />
                        </a> -->
                    </div>
                    <div class="squareNavBtn__title">
                        Локации для свиданий
                    </div>
                </div>
            </div>
            <div class="navigationMenu__item">
                <div class="squareNavBtn">
                    <div class="squareNavBtn__image">
                        <img src="assets/images/home-page/linkToPsychologyX2.jpg" alt="linkToPsychology">
                        <!-- <a href="assets/images/home-page/linkToPsychologyX2.jpg" class="progressive replace">
                            <img src="assets/images/home-page/smallLinkToPsychology.jpg" class="preview" alt="linkToPsychology" />
                        </a> -->
                    </div>
                    <div class="squareNavBtn__title">
                        Психоло&shy;гические тесты
                    </div>
                </div>
            </div>
        </nav>
        <section class="appOpportunity">
            <!-- <div class="appOpportunity__head">
                <h2 class="moduleTitle">Dazzlink – это</h2>
                <div class="appOpportunity__desc">
                    {{getContent('home-appOpportunity-desc')}}
                </div>
                <div class="appOpportunity__join">
                    <button (click)="mobileDetectService.goToDeviceStore()" class="btn btn--size--long">{{getContent('home-appOpportunity-join')}}</button>
                </div>
            </div> -->
            <ul class="appOpportunity__menu">
                <li class="menuAcco appOpportunity__item">
                    <div class="menuAcco__trigger">
                        <app-acco-trigger
                            [options]="{ caption: appOpportunityMenu.media.caption }"
                            type="link"
                            (click)="onAccoTriggerClick(['/media'])"
                        >
                        </app-acco-trigger>
                    </div>
                </li>
                <li class="menuAcco appOpportunity__item">
                    <div class="menuAcco__trigger">
                        <app-acco-trigger
                            [options]="{ caption: appOpportunityMenu.locations.caption }"
                            [(ngModel)]="appOpportunityMenu.locations.active"
                        >
                        </app-acco-trigger>
                    </div>
                    <div class="menuAcco__content" [class.menuAcco__content--hidden]="!appOpportunityMenu.locations.active">
                        <div class="appAdv">
                            <div class="appAdv__image">
                                <img src="assets/images/appAdv1.png" alt="appAdvantage">
                            </div>
                            <div class="appAdv__content">
                                <h2 class="moduleTitle">
                                    Знакомься онлайн
                                </h2>
                                <div class="appAdv__text">
                                    Если ты стремишься встретить новых людей, в Dazzlink ты найдешь все функции, призванные сделать невозможное возможным.
                                    Знакомиться онлайн — это просто.
                                </div>
                            </div>
                        </div>
                        <div class="appAdv">
                            <div class="appAdv__image">
                                <img src="assets/images/appAdv2.png" alt="appAdvantage">
                            </div>
                            <div class="appAdv__content">
                                <h2 class="moduleTitle">
                                    Выходи в оффлайн
                                </h2>
                                <div class="appAdv__text">
                                    Если ты стремишься встретить новых людей, то Dazzlink поможет организовать тебе свидание.
                                    Предложит места для встречи, забронирует столик и оформит скидку.
                                </div>
                            </div>
                        </div>
                        <div class="appAdv">
                            <div class="appAdv__image">
                                <img src="assets/images/appAdv1.png" alt="appAdvantage">
                            </div>
                            <div class="appAdv__content">
                                <h2 class="moduleTitle">
                                    Общайся с умом
                                </h2>
                                <div class="appAdv__text">
                                    Если ты стремишься встретить новых людей,
                                    в Dazzlink ты найдешь помощь в определении психологической совместимости и осознанном выборе партнера.
                                </div>
                            </div>
                        </div>
                        <div class="appAdv appAdv--forDesktop">
                            <div class="appAdv__image">
                                <img src="assets/images/appAdv3.png" alt="appAdvantage">
                            </div>
                            <div class="appAdv__content">
                                <h2 class="moduleTitle">
                                    Скачайте приложение
                                </h2>
                                <div class="appAdv__text">
                                    Тысячи людей уже доверили нам свою судьбу,
                                    присоединяйтесь и найдите любовь на всю жизнь
                                </div>
                                <div class="linkToApp appAdv__links">
                                    <a href="https://www.apple.com/app-store" target="_blank" class="linkToApp__item">
                                        <img src="assets/images/store/linkIOSShort.svg" class="linkToApp__img" alt="linkIOS">
                                    </a>
                                    <a href="https://play.google.com" target="_blank" class="linkToApp__item">
                                        <img src="assets/images/store/linkAndroid.svg" class="linkToApp__img" alt="linkAndroid">
                                    </a>
                                    <a href="https://appgallery.huawei.com" target="_blank" class="linkToApp__item">
                                        <img src="assets/images/store/linkAppGallery.svg" class="linkToApp__img" alt="linkAppGallery">
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="appAdv appAdv--forMobile">
                            <div (click)="mobileDetectService?.goToDeviceStore()" class="downloadApp appAdv__download">
                                <div class="downloadApp__title">Скачайте<br>приложение</div>
                                <div class="downloadApp__icon">
                                    <img [src]="mobileDetectService?.mobileStoreIconSrc()" alt="storeIcon">
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="menuAcco appOpportunity__item">
                    <div class="menuAcco__trigger">
                        <app-acco-trigger
                            [options]="{ caption: appOpportunityMenu.company.caption }"
                            type="link"
                            (click)="onAccoTriggerClick(['/agreements'])"
                        >
                        </app-acco-trigger>
                    </div>
                </li>
                <li class="menuAcco appOpportunity__item">
                    <div class="menuAcco__trigger">
                        <app-acco-trigger
                            [options]="{ caption: appOpportunityMenu.conditions.caption }"
                            [(ngModel)]="appOpportunityMenu.conditions.active"
                        >
                        </app-acco-trigger>
                    </div>
                    <div class="menuAcco__content" [class.menuAcco__content--hidden]="!appOpportunityMenu.conditions.active">
                        <div class="aboutCompany">
                            Тарифы и условия
                        </div>
                    </div>
                </li>
                <li class="menuAcco appOpportunity__item">
                    <div class="menuAcco__trigger">
                        <app-acco-trigger
                            [options]="{ caption: appOpportunityMenu.questions.caption }"
                            [(ngModel)]="appOpportunityMenu.questions.active"
                        >
                        </app-acco-trigger>
                    </div>
                    <div class="menuAcco__content" [class.menuAcco__content--hidden]="!appOpportunityMenu.questions.active">
                        <div class="aboutCompany">
                            Помощь и частые вопросы
                        </div>
                    </div>
                </li>
            </ul>
        </section>
        <section class="navTetris">
            <div class="navTetris__row navTetris__row--wrap">
                <div class="navTetris__block">
                    <app-acco-trigger
                        [options]="{ caption: appOpportunityMenu.tariff.caption }"
                        type="link"
                        (click)="onAccoTriggerClick(['/agreements'])"
                    >
                    </app-acco-trigger>
                </div>
                <div class="navTetris__block navTetris__block--size--wide">
                    <app-acco-trigger
                        [options]="{ caption: appOpportunityMenu.linkToQuestions.caption }"
                        type="link"
                        (click)="onAccoTriggerClick(['/agreements'])"
                    >
                    </app-acco-trigger>
                </div>
            </div>
            <div class="navTetris__row navTetris__row--nowrap">
                <div class="navTetris__block navTetris__block--size--wide">
                    <app-acco-trigger
                        [options]="{ caption: appOpportunityMenu.legalInf.caption }"
                        type="link"
                        (click)="onAccoTriggerClick(['/agreements'])"
                    >
                    </app-acco-trigger>
                </div>
                <div class="navTetris__block">
                    <app-acco-trigger
                        [options]="{ caption: appOpportunityMenu.linkToCompany.caption }"
                        type="link"
                        (click)="onAccoTriggerClick(['/agreements'])"
                    >
                    </app-acco-trigger>
                </div>
            </div>
        </section>
    </div>
</main>

<ng-template #linkToApp>
    <div class="linkToApp linkToApp--alignRight">
        <a
            href="https://www.apple.com/app-store"
            target="_blank"
            class="linkToApp__item"
        >
            <img src="assets/images/store/linkIOSShort.svg" class="linkToApp__img" alt="IOS" />
        </a>
        <a
            href="https://play.google.com"
            target="_blank"
            class="linkToApp__item"
        >
            <img src="assets/images/store/linkAndroid.svg" class="linkToApp__img" alt="Android" />
        </a>
        <a
            href="https://appgallery.huawei.com"
            target="_blank"
            class="linkToApp__item"
        >
            <img src="assets/images/store/linkAppGallery.svg" class="linkToApp__img" alt="AppGallery" />
        </a>
    </div>
</ng-template>